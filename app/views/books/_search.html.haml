- # This class is not used anymore but left for now as a backup if needed one day to retrieve search in browse books page
:javascript  
  function searchfnc(searchquery, e, field){
    if(field == null || field == '')
      return;
    var type = e.options[e.selectedIndex].value;
    if(searchquery == null || searchquery == ''){
      searchquery = "_" + type + "=" + field;
    } 
    else if(searchquery.toLowerCase().indexOf("_" + type.toLowerCase()) != -1){
      searchquery = searchquery.replace("_" + type.toLowerCase() + "=","_" + type.toLowerCase() + "=" + field + " _AND ");
    }
    else{
      searchquery += "&_" + type + "=" + field;
    }
    url = window.location.href.split('?')[0];
    url = url.split('#')[0];
    window.location = url + "?" + searchquery;
  }
.spacing-left
  - jsquery = set_query_string(@query_array, true)
  .col-sm-12.browse-all
    %h3.pangel-title
      = I18n.t(:books_index_search_filter)
    %hr
    %div
      %select.btn.form-control.allcat#searchby
        %option{:value => "ALL"} 
          = I18n.t(:option_all)
        %option.topdropdown-search{:value => "title", :selected => true} 
          = I18n.t(:option_title)
        %option.topdropdown-search{:value => "language"} 
          = I18n.t(:option_language)
        %option.topdropdown-search{:value => "published_on"} 
          = I18n.t(:option_publish_time)
        %option.topdropdown-search{:value => "geo_location"} 
          = I18n.t(:option_regional_affiliation)
        %option.topdropdown-search{:value => "author"} 
          = I18n.t(:option_author)
        %option.topdropdown-search{:value => "name"} 
          = I18n.t(:option_tagged_species)
        %option.topdropdown-search{:value => "subject"} 
          = I18n.t(:option_genre)
        %option.topdropdown-search{:value => "content"} 
          = I18n.t(:option_content)
    %p
    .input-group.margin-bottom
      %input.form-control{:id=> "searchfield", :type => "text", :onkeypress => "if(event.keyCode == 13){searchfnc('#{jsquery}', document.getElementById('searchby'), document.getElementById('searchfield').value);return false;}"}
      %span.input-group-btn
        %button.btn.btn-default{:onclick => "searchfnc('#{jsquery}', document.getElementById('searchby'), document.getElementById('searchfield').value); return false;"}
          = I18n.t(:search_go)          
  %hr